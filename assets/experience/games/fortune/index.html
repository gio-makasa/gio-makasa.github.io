<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="fortuna.css">
	<title>ფორტუნა</title>
</head>
<body>
	<div class="frame">
		<header>
			<h1>ფორტუნა</h1>
		</header>
		<hr>
		<pre id="game_over">
		</pre>
		<section>
			<article>
				<img src="../pictures/deck/blank.gif">
				<img src="../pictures/deck/blank.gif">
				<img src="../pictures/deck/blank.gif">
				<img src="../pictures/deck/blank.gif">
				<img src="../pictures/deck/blank.gif">
			</article>
			<div class="buttons">
				<button onclick="change()" id="chng">CHANGE</button>
				<button onclick="Up()" id="up">UP</button>
				<button onclick="Down()" id="down">DOWN</button>
				<button onclick="reset()" id="reset">RESET</button>
			</div>
			<pre id="result">
			</pre>
		</section>
	</div>
	<div id="alert">
		<span id="closebtn">&times;</span>
		გამოიცანით მომდევნო კარტი ბოლო კარტზე მაღალი იქნება თუ დაბალი, <strong>შეგიძლიათ 1-ხელ შეცვლა.</strong>
	</div>
</body>
<script>
	let kartebi = [
				  "6a","6g","6j","6k"
				  ,"7a","7g","7j","7k"
				  ,"8a","8g","8j","8k"
				  ,"9a","9g","9j","9k"
				  ,"10a","10g","10j","10k"
				  ,"va","vg","vj","vk"
				  ,"da","dg","dj","dk"
				  ,"ka","kg","kj","kk"
				  ,"ta","tg","tj","tk"
                ];
	let R = Math.floor(Math.random() * 36);  // R -  Random pirveli karti
	let pirveli_karti = score(R);
	let I = 0; // I - images counter
	document.images[I].src="../pictures/deck/"+ kartebi[R] +".png";
	function change(){
		let z = Math.floor(Math.random() * 36);
		document.images[I].src="../pictures/deck/"+ kartebi[z] +".png";
		document.getElementById("chng").disabled = true;
		document.getElementById("chng").style.opacity = "0.5" ;
		pirveli_karti = score(z);
	}
	function Up(){
		I++;
		let z = Math.floor(Math.random() * 36);
		document.images[I].src="../pictures/deck/"+ kartebi[z] +".png";
		let maRali = score(z);
		if(maRali > pirveli_karti){
		  document.getElementById("result").innerHTML =  "არის მაღალი!!!";
		  document.getElementById("result").style.color = "green";
		  pirveli_karti = maRali;
		  checker();
		}
		else{
		  document.getElementById("result").innerHTML =  "არ არის მაღალი!!!";
		  document.getElementById("result").style.color = "red";
		  document.getElementById("game_over").innerHTML = "სამწუხაროდ თქვენ წააგეთ";
		  document.getElementById("game_over").style.color = "red";
		  document.getElementById("chng").disabled = true;
		  document.getElementById("chng").style.opacity = "0.5" ;
		  document.getElementById("up").disabled = true;
		  document.getElementById("up").style.opacity = "0.5" ;
		  document.getElementById("down").disabled = true;
		  document.getElementById("down").style.opacity = "0.5" ;
		}
	}
	function Down(){
		I++;
		let z = Math.floor(Math.random() * 36);
		document.images[I].src="../pictures/deck/"+ kartebi[z] +".png";
		let dabali = score(z);
		if(dabali < pirveli_karti){
		  document.getElementById("result").innerHTML =  "არის დაბალი!!!";
		  document.getElementById("result").style.color = "green";
		  pirveli_karti = dabali;
		  checker();
		}
		else{
		  document.getElementById("result").innerHTML =  "არ არის დაბალი!!!";
		  document.getElementById("result").style.color = "red";
		  document.getElementById("game_over").innerHTML = "სამწუხაროდ თქვენ წააგეთ";
		  document.getElementById("game_over").style.color = "red";
		  document.getElementById("chng").disabled = true;
		  document.getElementById("chng").style.opacity = "0.5" ;
		  document.getElementById("up").disabled = true;
		  document.getElementById("up").style.opacity = "0.5" ;
		  document.getElementById("down").disabled = true;
		  document.getElementById("down").style.opacity = "0.5" ;
		}
	}
	function score(Z){
	let qula = 0;
	if(kartebi[Z].substring(0,1) == "6"){
	  qula = 6;
	}
	if(kartebi[Z].substring(0,1) == "7"){
	  qula = 7;
	}
	if(kartebi[Z].substring(0,1) == "8"){
	  qula = 8;
	}
	if(kartebi[Z].substring(0,1) == "9"){
	  qula = 9;
	}
	if(kartebi[Z].substring(0,1) == "1"){
	  qula = 10;
	}
	if(kartebi[Z].substring(0,1) == "v"){
	  qula = 11;
	}
	if(kartebi[Z].substring(0,1) == "d"){
	  qula = 12;
	}
	if(kartebi[Z].substring(0,1) == "k"){
	  qula = 13;
	}
	if(kartebi[Z].substring(0,1) == "t"){
	  qula = 14;
	}
	console.log(qula);
	return qula;
	}
	function checker(){
		if(I == 4){
			document.getElementById("game_over").innerHTML = "თქვენ მოიგეთ";
			document.getElementById("game_over").style.color = "green";
			document.getElementById("chng").disabled = true;
			document.getElementById("chng").style.opacity = "0.5" ;
			document.getElementById("up").disabled = true;
			document.getElementById("up").style.opacity = "0.5" ;
			document.getElementById("down").disabled = true;
			document.getElementById("down").style.opacity = "0.5" ;
		}
	}
	function reset(){
		location.reload();
	}
	document.getElementById("closebtn").onclick = function(){
		this.parentElement.style.opacity = "0";
		setTimeout(function(){ div.style.display = "none"; }, 1000);
	}
</script>
</html>